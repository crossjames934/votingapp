(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(49)},46:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(19),r=a.n(i),o=a(9),l=a(2),c=a(3),u=a(6),d=a(4),h=a(5),p=a(1),m=a(8),g=a.n(m),b=(a(46),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).logout=function(){g.a.get("/logout").then(function(e){console.log(e.data),a.props.updateParentState({authenticated:!1,username:"",attemptedLogin:!1})}).catch(function(e){alert("There was an error connecting, please check console for the error"),console.log(e)})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"notAuthenticated",value:function(){return s.a.createElement("div",{className:"authenticationLinks"},s.a.createElement("p",{className:"clickableText",onClick:this.props.showRegister},"Register"),s.a.createElement("p",null," || "),s.a.createElement("p",{className:"clickableText",onClick:this.props.showLogin},"Log In"))}},{key:"authenticated",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Welcome ",this.props.username),s.a.createElement("p",{className:"clickableText",onClick:this.logout},"Sign Out"))}},{key:"render",value:function(){return s.a.createElement("div",null,this.props.authenticated?this.authenticated():this.notAuthenticated())}}]),t}(n.Component)),f=a(12),v=a.n(f),w=a(20),E=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"options",value:function(){var e=this,t=Object(o.a)(this.props.widgets);this.props.authenticated&&(t=t.filter(function(e){return"login"!==e&&"register"!==e}));var a=t.map(function(t){var a=e.props.visibleWidgets.includes(t),n={textShadow:a?"0 0 2px gold":"none",cursor:"pointer"},i=function(){var n=Object(w.a)(v.a.mark(function n(){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a;case 2:if(!n.sent){n.next=6;break}e.props.closeWidget(t),n.next=7;break;case 6:e.props.showWidget(t);case 7:e.props.bringMenuToFront();case 8:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();return s.a.createElement("li",{key:t,onClick:i,style:n},t)});return s.a.createElement("ul",{className:"mainMenuOptions"},a)}},{key:"render",value:function(){var e={order:this.props.order,display:this.props.showing?"block":"none",width:"30vw",animation:"appear 1s ease-out ".concat(100*this.props.order,"ms forwards")};return s.a.createElement("div",{className:"widget",style:e},s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X")),s.a.createElement("h2",null,"Main Menu"),this.options())}}]),t}(n.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={order:this.props.order,display:this.props.showing?"block":"none",width:"30vw",animation:"appear 1s ease-out ".concat(100*this.props.order,"ms forwards")};return s.a.createElement("div",{className:"widget",style:e},s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X")),s.a.createElement("h2",null,"Welcome to Cross Voting"),s.a.createElement("p",null,"Here you can make your own polls, and have your friends vote on them."),s.a.createElement("p",null,"You can do all this without making an account, but if you want to make lots of polls you will need to register."),s.a.createElement("p",null,"Registering is super easy, you can do it with a couple clicks if you use your Facebook or Google account."),s.a.createElement("p",null,"You can also register using traditional means too."))}}]),t}(n.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={order:this.props.order,display:this.props.showing?"block":"none",animation:"appear 1s ease-out ".concat(200*this.props.order,"ms forwards")};return s.a.createElement("div",{className:"widget",style:e},s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X")),s.a.createElement("h2",null,"Poll Menu"))}}]),t}(n.Component),j=a(10),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",email:""},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this.state,a=t.username,n=t.password,s=t.email;g.a.post("/register",{username:a,password:n,email:s}).then(function(e){if(200!==e.status)return alert("There was a problem connecting to the server, see console for more information"),console.log(e);console.log(e.data)}).catch(function(e){return alert("There was a problem connecting to the server, see console for more information"),console.log(e)}),e.preventDefault()}},{key:"render",value:function(){var e={order:this.props.order,display:this.props.showing?"block":"none",width:"30vw",animation:"appear 1s ease-out ".concat(100*this.props.order,"ms forwards")},t={display:"flex",justifyContent:"space-between",margin:"10px 0"};return s.a.createElement("div",{className:"widget",style:e},s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X")),s.a.createElement("h2",null,"Register"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{style:t},s.a.createElement("p",null,"Username:"),s.a.createElement("input",{onChange:this.handleChange,name:"username",type:"text",id:"registeringUsername",value:this.state.username,required:!0})),s.a.createElement("div",{style:t},s.a.createElement("p",null,"Password:"),s.a.createElement("input",{onChange:this.handleChange,name:"password",type:"password",id:"registeringPassword",value:this.state.password,required:!0})),s.a.createElement("div",{style:t},s.a.createElement("p",null,"Email:"),s.a.createElement("input",{onChange:this.handleChange,name:"email",type:"email",id:"registeringEmail",value:this.state.email,required:!0})),s.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"})))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",failedMessage:""},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;this.props.updateParentState({attemptedLogin:!0}),this.setState({failedMessage:""});var a=this.state,n=a.username,s=a.password;g.a.post("/login",{username:n,password:s}).then(function(e){if(200!==e.status)return alert("There was a problem after connecting to the server, see console for more information"),console.log(e);e.data.loggedIn?(t.props.updateParentState({authenticated:!0,username:e.data.message}),t.setState({username:"",password:""}),setTimeout(t.props.close,2e3)):(t.setState({failedMessage:e.data.message}),t.props.updateParentState({attemptedLogin:!1}))}).catch(function(e){console.log(e),t.setState({failedMessage:"Trouble connecting to server. Potentially from loss of internet connection. See console for more details"}),t.props.updateParentState({attemptedLogin:!1})}),e.preventDefault()}},{key:"attemptedLogin",value:function(){var e=this.props.authenticated?"You have logged in successfully!":"Please wait...";return s.a.createElement("div",null,s.a.createElement("p",null,e))}},{key:"loginForm",value:function(){var e={display:"flex",justifyContent:"space-between",margin:"10px 0"};return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{style:e},s.a.createElement("p",null,"Username:"),s.a.createElement("input",{onChange:this.handleChange,name:"username",type:"text",id:"loginUsername",value:this.state.username,required:!0})),s.a.createElement("div",{style:e},s.a.createElement("p",null,"Password:"),s.a.createElement("input",{onChange:this.handleChange,name:"password",type:"password",id:"loginPassword",value:this.state.password,required:!0})),s.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"})))}},{key:"render",value:function(){var e={order:this.props.order,display:this.props.showing?"block":"none",width:"30vw",animation:"appear 1s ease-out ".concat(100*this.props.order,"ms forwards")};return s.a.createElement("div",{className:"widget",style:e},s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X")),s.a.createElement("h2",null,"Login"),this.props.attemptedLogin?this.attemptedLogin():this.loginForm(),s.a.createElement("p",{className:"red"},this.state.failedMessage))}}]),t}(n.Component),S="Intro",C="Main Menu",N="Poll Menu",L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={authenticated:!1,username:"",visibleWidgets:[S,N],attemptedLogin:!1},a.closeWidget=a.closeWidget.bind(Object(p.a)(Object(p.a)(a))),a.showWidget=a.showWidget.bind(Object(p.a)(Object(p.a)(a))),a.updateParentState=a.updateParentState.bind(Object(p.a)(Object(p.a)(a))),a.bringMenuToFront=a.bringMenuToFront.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/whoami").then(function(t){t.data&&e.setState({authenticated:!0,username:t.data})}).catch(function(e){console.log(e)})}},{key:"updateParentState",value:function(e){this.setState(e)}},{key:"closeWidget",value:function(e){this.setState({visibleWidgets:this.state.visibleWidgets.filter(function(t){return t!==e})})}},{key:"showWidget",value:function(e){var t=this.state.visibleWidgets.includes(C),a=this.state.visibleWidgets.filter(function(e){return e!==C}),n=[e].concat(Object(o.a)(a));t&&n.unshift(C),this.setState({visibleWidgets:n})}},{key:"bringMenuToFront",value:function(){var e=this.state.visibleWidgets.filter(function(e){return e!==C});this.setState({visibleWidgets:[C].concat(Object(o.a)(e))})}},{key:"render",value:function(){var e=this,t=function(t){return e.state.visibleWidgets.indexOf(t)},a=function(t){return e.state.visibleWidgets.includes(t)};return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("p",{className:"hamburgerIcon",onClick:function(){e.showWidget(C)}},"\u2630"),s.a.createElement("h1",{id:"mainTitle"},"Voting App"),s.a.createElement(b,{authenticated:this.state.authenticated,username:this.state.username,showRegister:function(){return e.showWidget("Register")},showLogin:function(){return e.showWidget("Login")},updateParentState:this.updateParentState})),s.a.createElement("main",null,s.a.createElement(E,{widgets:[S,N,"Register","Login"],order:t(C),showing:a(C),close:function(){e.closeWidget(C)},visibleWidgets:this.state.visibleWidgets,showWidget:this.showWidget,closeWidget:this.closeWidget,bringMenuToFront:this.bringMenuToFront,authenticated:this.state.authenticated}),s.a.createElement(y,{order:t(S),showing:a(S),close:function(){e.closeWidget(S)}}),s.a.createElement(O,{order:t(N),showing:a(N),close:function(){e.closeWidget(N)}}),s.a.createElement(k,{order:t("Register"),showing:a("Register"),close:function(){e.closeWidget("Register")}}),s.a.createElement(W,{order:t("Login"),showing:a("Login"),close:function(){e.closeWidget("Login")},authenticated:this.state.authenticated,attemptedLogin:this.state.attemptedLogin,updateParentState:this.updateParentState})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.9519c9c9.chunk.js.map