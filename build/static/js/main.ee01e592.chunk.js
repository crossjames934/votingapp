(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAACDVBMVEUAAABEREBEREBEREBEREBEREBEREBEREBEREBEREBEREBEREBEREBEREBEREAAAAAAAAAAAAD04eH04eH04eH04eH04eH04eEAAAAAAAD04eH04eH04eEJCQkdHRsYGBcBAQH04eH04eH04eEICAcFBQU5OTYMDAv04eH04eH04eEAAAAAAAAsLCkJCQn04eH04eEAAAAAAAAzMzAJCQn04eH04eEAAAAAAAALCwv04eH04eEAAAD04eECAgL04eELCwoAAAD04eH04eELCwsAAAD04eEAAAD04eEAAAD04eEAAAACAgIVFRT04eEpKSYAAAAAAAD04eEdHRsLCwoaGhn04eH04eH04eEAAAD04eEqKicNDQwBAQH04eH04eEEBAQODg0LCwoBAQEKCgn04eEMDAwVFRMGBgb04eH04eEgIB4CAgIAAAAAAAD04eH04eH04eH04eEBAQEWFhQAAAD04eH04eEDAwMAAAD04eEAAAD04eH04eEHBwf04eEAAAAoKCYMDAv04eERERAPDw/04eH04eH04eENDQ304eEAAAAJCQgAAAD04eECAgL04eEAAAAAAAAeHh0yMi/04eH04eH04eH04eESEhEgIB704eEDAwP04eEBAQH04eETExIBAQH04eH04eEJCQgBAQE0NDECAgICAgIICAj04eEKCgoICAgCAgL04eGcERHHAAAArnRSTlMAAQIDBAUGBwgJCgsMDg8QQGuRscvg7/oWW57an2QkJnPF/sh6HBJZuf21TgMYc9/dagkScufmaQVT29lJrlrwYwuipg0k0z/uVvliQTHWGlkarQVXKOLOknK2FgtqoacmS2Bja7JUBxik3B1CH3Cp0PT7cSsqlpwsMfIGhOoUqBIXDIU9PJmT3k73Q3duj0XlfQofFYvo9esIIKwzlG/zN2yXmHRrFEtXEqNlek8RSHcwAAAACXBIWXMAAABIAAAASABGyWs+AAASGElEQVR42u2d+3sU5RmGZzfZsGFz3mQ3ySqYBZQkaBMkCRI0Ug0hiWIST43WUKy2iuXYggVRtPVQUalaaW21B8/WQ//GJsWQzZKKzLzf97wz73P/BHculrneZ7M7O/vM9wUBIZWk0ul0is6Uq6RmCTpTroJUbSaT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"},24:function(e,t,a){e.exports=a(52)},49:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(22),i=a.n(r),o=a(14),c=a(2),l=a(3),u=a(5),d=a(4),h=a(6),p=a(1),m=a(7),g=a.n(m),f=(a(49),a(23)),A=a.n(f),v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).logout=function(){g.a.get("/logout").then(function(e){console.log(e.data),a.props.updateParentState({authenticated:!1,username:"",attemptedLogin:!1,pollMenuNeedsUpdate:!0})}).catch(function(e){alert("There was an error connecting, please check console for the error"),console.log(e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"notAuthenticated",value:function(){return s.a.createElement("div",{className:"authenticationLinks"},s.a.createElement("p",{className:"clickableText",onClick:this.props.showRegister},"Register"),s.a.createElement("p",null," || "),s.a.createElement("p",{className:"clickableText",onClick:this.props.showLogin},"Log In"))}},{key:"authenticated",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null,"Welcome ",this.props.username),s.a.createElement("p",{className:"clickableText",onClick:this.logout},"Sign Out"))}},{key:"render",value:function(){return s.a.createElement("div",null,this.props.authenticated?this.authenticated():this.notAuthenticated())}}]),t}(n.Component),E=a(8),w=a.n(E),b=a(11),O=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"closeWidgetBtn"},s.a.createElement("p",{onClick:this.props.close,className:"innerX"},"X"))}}]),t}(n.Component),y=a(9),C=a.n(y),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"options",value:function(){var e=this,t=Object(o.a)(this.props.widgets),a=(t=this.props.authenticated?t.filter(function(e){return"Login"!==e&&"Register"!==e}):t.filter(function(e){return"My Polls"!==e})).map(function(t){var a={textShadow:e.props.visibleWidgets.includes(t)?"0 0 2px gold":"none",cursor:"pointer"},n=function(){var a=Object(b.a)(w.a.mark(function a(){return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.showWidget(t);case 2:e.props.bringMenuToFront(),e.props.scrollToTarget();case 4:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();return s.a.createElement("li",{key:t,onClick:n,style:a},t)});return s.a.createElement("ul",{className:"mainMenuOptions"},a)}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",{id:"menuHeader"},"Main Menu"),this.options()))}}]),t}(n.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"Welcome to Cross Voting"),s.a.createElement("p",null,"Here you can make your own polls, and have your friends vote on them."),s.a.createElement("p",null,"You can do all this without making an account, but if you want your poll to be associated with your username, you will need to register.")))}}]),t}(n.Component),j=a(12),S="dateAdded",T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={searchQuery:"",list:[],sortBy:S},a.showList=a.showList.bind(Object(p.a)(Object(p.a)(a))),a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getPollList()}},{key:"getPollList",value:function(){var e=Object(b.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("pollList");case 3:return t=e.sent,(a=t.data).forEach(function(e){e.dateAdded=new Date(e.dateAdded),e.lastVotedOn=new Date(e.lastVotedOn)}),e.next=8,this.setState({list:a});case 8:this.sortList(this.state.sortBy),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert("There was an error getting polls from the server, see console for error."),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"showList",value:function(){var e=this,t=this.state.list;if(this.state.searchQuery.length>0)try{var a=new RegExp(this.state.searchQuery,"gi");t=t.filter(function(e){return a.test(e.question)})}catch(n){console.log("invalid regex")}return t.map(function(t){var a={display:t.userHasVoted?"flex":"none"};return s.a.createElement("div",{className:"flexCenter"},s.a.createElement("p",{className:"pollMenuChoice clickableText",onClick:function(){window.scrollTo(0,0),e.props.updateParentState({showingPollId:t.id}),e.props.showPoll()}},t.question),s.a.createElement("p",{style:a,className:"votedSign"},"V"))})}},{key:"sortList",value:function(e){var t=this.state.list.sort(function(t,a){return a[e]-t[e]});this.setState({list:t,sortBy:e},this.showList)}},{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"componentDidUpdate",value:function(){this.props.needsUpdate&&(this.props.updateParentState({pollMenuNeedsUpdate:!1}),this.getPollList())}},{key:"render",value:function(){var e=this,t=function(t){return{textDecoration:t===e.state.sortBy?"underline":"none"}};return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"Poll Menu"),s.a.createElement("div",null,s.a.createElement("p",{onClick:this.props.createNew,className:"clickableText"},"Create New Poll"),s.a.createElement("input",{onChange:this.handleChange,name:"searchQuery",value:this.state.searchQuery,className:"searchBar",type:"text"}),s.a.createElement("div",{className:"sortBy"},s.a.createElement("p",{style:t(S),onClick:function(){e.sortList(S)},className:"clickableText"},"Recently made"),s.a.createElement("p",{style:t("lastVotedOn"),onClick:function(){e.sortList("lastVotedOn")},className:"clickableText"},"Last voted on"),s.a.createElement("p",{style:t("voteCount"),onClick:function(){e.sortList("voteCount")},className:"clickableText"},"Most votes")),s.a.createElement("hr",null),this.showList())))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={errorMessage:"",polls:[],previousUsername:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getMyPolls()}},{key:"componentDidUpdate",value:function(){this.state.previousUsername!==this.props.username&&this.setState({previousUsername:this.props.username,polls:[]},this.getMyPolls)}},{key:"getMyPolls",value:function(){var e=Object(b.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.authenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.a.post("/myPolls",{username:this.props.username});case 5:if(t=e.sent,!(a=t.data).error){e.next=10;break}return console.log(a.error),e.abrupt("return",this.setState({errorMessage:a.message}));case 10:this.setState({polls:a.polls,errorMessage:""}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),this.setState({errorMessage:"There was a problem connecting, see console for the error"}),console.log(e.t0);case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"showList",value:function(){var e=this;return this.props.authenticated?this.state.polls.map(function(t){return s.a.createElement("p",{className:"clickableText",onClick:function(){window.scrollTo(0,0),e.props.updateParentState({showingPollId:t._id}),e.props.showPoll()}},t.question)}):s.a.createElement("p",{className:"red"},"Please log in to see poll list")}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"My Polls"),s.a.createElement("p",{onClick:this.props.createNew,className:"clickableText"},"Create New Poll"),s.a.createElement("hr",null),this.showList(),s.a.createElement("p",{className:"red"},this.state.errorMessage)))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={question:"",choices:["",""],submitAttempted:!1,submitSucceeded:!1},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.addNewChoice=a.addNewChoice.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(b.a)(w.a.mark(function e(t){var a,n,s,r,i=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({submitAttempted:!0});case 2:a=this.props.username,n=this.state,s=n.question,r=n.choices,g.a.post("/poll",{question:s,choices:r,author:a}).then(function(e){if(200!==e.status)return alert("There was a problem after connecting to the server, see console for more information"),console.log(e);i.setState({question:"",choices:["",""],submitSucceeded:!0}),i.props.updateParentState({pollMenuNeedsUpdate:!0})}).catch(function(e){i.setState({submitSucceeded:!1,submitAttempted:!1}),console.log(e)}),t.preventDefault();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"blankSpace",value:function(){return s.a.createElement("div",{style:{width:30,height:30}}," ")}},{key:"choices",value:function(){var e=this;return this.state.choices.map(function(t,a){return s.a.createElement("div",{key:"choice_"+a,className:"spaceAround"},s.a.createElement("p",null,"Choice ",a+1,": "),s.a.createElement("input",{onChange:function(t){var n=e.state.choices.slice();n[a]=t.target.value,e.setState({choices:n})},value:e.state.choices[a],type:"text",required:!0}),e.state.choices.length>2?s.a.createElement("p",{onClick:function(){var t=e.state.choices.slice();t.splice(a,1),e.setState({choices:t})},className:"innerX"},"X"):e.blankSpace())})}},{key:"addNewChoice",value:function(e){this.setState({choices:[].concat(Object(o.a)(this.state.choices),[""])}),e.preventDefault()}},{key:"showSubmitStatus",value:function(){var e=this,t=this.state.submitSucceeded?"Poll successfully submitted":"Sending...";return s.a.createElement("div",null,s.a.createElement("p",{className:"red"},t),s.a.createElement("p",{onClick:function(){e.setState({submitAttempted:!1,submitSucceeded:!1})},className:"clickableText"},"Back"))}},{key:"showForm",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Question: "),s.a.createElement("input",{name:"question",onChange:this.handleChange,type:"text",value:this.state.question,required:!0}),this.blankSpace()),this.choices(),s.a.createElement("button",{className:"addNewChoiceBtn",onClick:this.addNewChoice},"Add New Choice"),s.a.createElement("br",null),s.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit Poll"}))}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"Create New Poll"),this.state.submitAttempted?this.showSubmitStatus():this.showForm()))}}]),t}(n.Component),D=a(13),x=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.createChart()}},{key:"createChart",value:function(){var e=this.props.choiceArr,t={};this.props.responseData.forEach(function(e){e.count&&(t[e.choice]=e.count)});var a=document.getElementById("donut_chart");a&&(a.innerHTML="");var n=.74*window.innerWidth<350?.74*window.innerWidth:350,s=n/7*5,r=Math.min(n,s)/2-40,i=D.f("#donut_chart").append("svg").attr("width",n).attr("height",s).append("g").attr("transform","translate("+n/2+","+s/2+")"),o=t,c=D.d().domain(e).range(D.e),l=D.c().sort(null).value(function(e){return e.value})(D.b(o)),u=D.a().innerRadius(.4*r).outerRadius(.8*r),d=D.a().innerRadius(.9*r).outerRadius(.9*r);i.selectAll("allSlices").data(l).enter().append("path").attr("d",u).attr("fill",function(e){return c(e.data.key)}).attr("stroke","white").style("stroke-width","2px").style("opacity",.7),i.selectAll("allPolylines").data(l).enter().append("polyline").attr("stroke","black").style("fill","none").attr("stroke-width",1).attr("points",function(e){var t=u.centroid(e),a=d.centroid(e),n=d.centroid(e),s=e.startAngle+(e.endAngle-e.startAngle)/2;return n[0]=.95*r*(s<Math.PI?1:-1),[t,a,n]}),i.selectAll("allLabels").data(l).enter().append("text").text(function(e){return e.data.key}).attr("transform",function(e){var t=d.centroid(e),a=e.startAngle+(e.endAngle-e.startAngle)/2;return t[0]=.99*r*(a<Math.PI?1:-1),"translate("+t+")"}).style("text-anchor",function(e){return e.startAngle+(e.endAngle-e.startAngle)/2<Math.PI?"start":"end"})}},{key:"render",value:function(){return s.a.createElement("div",{id:"donut_chart"})}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={pollId:a.props.pollId,submittedVote:!1,pollData:{question:"",choices:[],author:""},responseData:[]},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(b.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.pollId===this.state.pollId){e.next=5;break}return e.next=3,g.a.post("/castVote",{choice:null,id:this.props.pollId,username:this.props.username,justLooking:!0});case 3:t=e.sent,this.setState({pollId:this.props.pollId,responseData:t.data,submittedVote:!1},this.getPollData);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPollData",value:function(){var e=Object(b.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("pollData/"+this.props.pollId);case 3:t=e.sent,a=t.data,this.setState({pollData:a}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert("There was an error getting the poll data from the server"),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"castVote",value:function(){var e=Object(b.a)(w.a.mark(function e(t){var a,n,s;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=this.props.username,this.props.authenticated){e.next=7;break}return e.next=5,g.a.get("ip");case 5:n=e.sent,a=n.data;case 7:return e.next=9,g.a.post("/castVote",{choice:t,id:this.props.pollId,username:a,justLooking:!1});case 9:s=e.sent,this.setState({responseData:s.data,submittedVote:!0}),this.props.updateParentState({pollMenuNeedsUpdate:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("There was an error getting information to or from the server. Please check console for error."),console.log(e.t0);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"showChoiceBtns",value:function(){var e=this,t=this.state.pollData?this.state.pollData.choices.map(function(t){return s.a.createElement("button",{className:"choiceBtn",onClick:function(){return e.castVote(t)}},t)}):"Could not connect to server.";return s.a.createElement("div",{className:"userChoices"},t,s.a.createElement("p",{className:"clickableText navigationText",onClick:function(){e.setState({submittedVote:!0})}},"See Results"))}},{key:"showResults",value:function(){var e=this,t=[],a=this.state.responseData.map(function(e){var a=e.choice,n=e.count;return n>0&&t.push(a),s.a.createElement("p",null,a,": ",n," votes")});return s.a.createElement("div",null,s.a.createElement("h3",null,"Results:"),s.a.createElement(x,{choiceArr:t,responseData:this.state.responseData}),a,s.a.createElement("p",{className:"clickableText navigationText",onClick:function(){e.setState({submittedVote:!1})}},"Change Vote"))}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,this.state.pollData.question),this.state.submittedVote?this.showResults():this.showChoiceBtns(),s.a.createElement("p",null,"Created By: ",this.state.pollData.author||"Anonymous")))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",email:"",submitted:!1,errorMessage:""},a.successMessage="Registered successfully, please check email for activation link.",a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a=this.state,n=a.username,s=a.password,r=a.email;g.a.post("/register",{username:n,password:s,email:r}).then(function(e){return 200!==e.status?(alert("There was a problem connecting to the server, see console for more information"),console.log(e)):e.data!==t.successMessage?t.setState({errorMessage:e.data},function(){setTimeout(function(){t.setState({errorMessage:""})},5e3)}):void t.setState({username:"",password:"",email:"",submitted:!0,errorMessage:""})}).catch(function(e){return alert("There was a problem connecting to the server, see console for more information"),console.log(e)}),e.preventDefault()}},{key:"registrationForm",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Username:"),s.a.createElement("input",{onChange:this.handleChange,name:"username",type:"text",id:"registeringUsername",value:this.state.username,required:!0})),s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Password:"),s.a.createElement("input",{onChange:this.handleChange,name:"password",type:"password",id:"registeringPassword",value:this.state.password,required:!0})),s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Email:"),s.a.createElement("input",{onChange:this.handleChange,name:"email",type:"email",id:"registeringEmail",value:this.state.email,required:!0})),s.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"}),s.a.createElement("p",{className:"red"},this.state.errorMessage))}},{key:"showSuccess",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("p",null,this.successMessage),s.a.createElement("p",{className:"red"},"You may need to check the spam folder."),s.a.createElement("p",{className:"clickableText",onClick:function(){e.setState({submitted:!1})}},"Back"))}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"Register"),this.state.submitted?this.showSuccess():this.registrationForm()))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",failedMessage:""},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;this.props.updateParentState({attemptedLogin:!0}),this.setState({failedMessage:""});var a=this.state,n=a.username,s=a.password;g.a.post("/login",{username:n,password:s}).then(function(e){if(200!==e.status)return alert("There was a problem after connecting to the server, see console for more information"),console.log(e);e.data.loggedIn?(t.props.updateParentState({authenticated:!0,username:e.data.message,pollMenuNeedsUpdate:!0}),t.setState({username:"",password:""}),t.props.closeRegister(),setTimeout(t.props.close,2e3)):(t.setState({failedMessage:e.data.message}),t.props.updateParentState({attemptedLogin:!1}))}).catch(function(e){console.log(e),t.setState({failedMessage:"Trouble connecting to server. Potentially from loss of internet connection. See console for more details"}),t.props.updateParentState({attemptedLogin:!1})}),e.preventDefault()}},{key:"attemptedLogin",value:function(){var e=this.props.authenticated?"You have logged in successfully!":"Please wait...";return s.a.createElement("div",null,s.a.createElement("p",null,e))}},{key:"loginForm",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Username:"),s.a.createElement("input",{onChange:this.handleChange,name:"username",type:"text",id:"loginUsername",value:this.state.username,required:!0})),s.a.createElement("div",{className:"spaceAround"},s.a.createElement("p",null,"Password:"),s.a.createElement("input",{onChange:this.handleChange,name:"password",type:"password",id:"loginPassword",value:this.state.password,required:!0})),s.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"})))}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id,className:"widget",style:C()(this.props.order,this.props.showing)},s.a.createElement("div",{className:"scrollable"},s.a.createElement(O,{close:this.props.close}),s.a.createElement("h2",null,"Login"),this.props.attemptedLogin?this.attemptedLogin():this.loginForm(),s.a.createElement("p",{className:"red"},this.state.failedMessage)))}}]),t}(n.Component),Q="Intro",W="Main Menu",R="Poll Menu",J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={authenticated:!1,username:"",visibleWidgets:[Q,R],attemptedLogin:!1,showingPollId:"",pollMenuNeedsUpdate:!1},a.closeWidget=a.closeWidget.bind(Object(p.a)(Object(p.a)(a))),a.showWidget=a.showWidget.bind(Object(p.a)(Object(p.a)(a))),a.updateParentState=a.updateParentState.bind(Object(p.a)(Object(p.a)(a))),a.bringMenuToFront=a.bringMenuToFront.bind(Object(p.a)(Object(p.a)(a))),a.scrollToTarget=a.scrollToTarget.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/whoami").then(function(t){t.data&&e.setState({authenticated:!0,username:t.data})}).catch(function(e){console.log(e)})}},{key:"updateParentState",value:function(e){this.setState(e)}},{key:"closeWidget",value:function(e){this.setState({visibleWidgets:this.state.visibleWidgets.filter(function(t){return t!==e})})}},{key:"showWidget",value:function(e){var t=this,a=this.state.visibleWidgets.filter(function(e){return e!==W}),n=[e].concat(Object(o.a)(a));this.state.visibleWidgets.includes(W)&&n.unshift(W),this.setState({visibleWidgets:n},function(){e!==W&&t.scrollToTarget()})}},{key:"showMenu",value:function(){this.state.visibleWidgets.includes(W)&&(document.getElementById("menuHeader").classList.remove("shine"),setTimeout(function(){document.getElementById("menuHeader").classList.add("shine")},100)),this.showWidget(W),window.scrollTo(0,0)}},{key:"bringMenuToFront",value:function(){var e=this.state.visibleWidgets.filter(function(e){return e!==W});this.setState({visibleWidgets:[W].concat(Object(o.a)(e))})}},{key:"scrollToTarget",value:function(){var e=window.innerWidth<855&&this.state.visibleWidgets.includes(W)?.74*window.innerHeight:0;window.scrollTo(0,e)}},{key:"render",value:function(){var e=this,t=function(t){return e.state.visibleWidgets.indexOf(t)},a=function(t){return e.state.visibleWidgets.includes(t)};return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"hamburgerIcon"},s.a.createElement("img",{alt:"MENU",src:A.a,className:"hamburgerPic",onClick:function(){e.showMenu()}})),s.a.createElement("h1",{id:"mainTitle"},"Voting App"),s.a.createElement(v,{authenticated:this.state.authenticated,username:this.state.username,showRegister:function(){e.showWidget("Register")},showLogin:function(){e.showWidget("Login")},scrollToTarget:this.scrollToTarget,updateParentState:this.updateParentState})),s.a.createElement("main",null,s.a.createElement(k,{widgets:[Q,R,"My Polls","Create New Poll","Register","Login"],order:t(W),showing:a(W),close:function(){e.closeWidget(W)},visibleWidgets:this.state.visibleWidgets,showWidget:this.showWidget,closeWidget:this.closeWidget,bringMenuToFront:this.bringMenuToFront,authenticated:this.state.authenticated,scrollToTarget:this.scrollToTarget,id:W.replace(/\s/g,"")}),s.a.createElement(P,{order:t(Q),showing:a(Q),close:function(){e.closeWidget(Q)},id:Q.replace(/\s/g,"")}),s.a.createElement(T,{order:t(R),showing:a(R),close:function(){e.closeWidget(R)},showPoll:function(){e.showWidget("Show Poll")},authenticated:this.state.authenticated,username:this.state.username,updateParentState:this.updateParentState,needsUpdate:this.state.pollMenuNeedsUpdate,createNew:function(){e.showWidget("Create New Poll")},id:R.replace(/\s/g,"")}),s.a.createElement(N,{order:t("My Polls"),showing:a("My Polls"),close:function(){e.closeWidget("My Polls")},showPoll:function(){return e.showWidget("Show Poll")},authenticated:this.state.authenticated,username:this.state.username,updateParentState:this.updateParentState,createNew:function(){e.showWidget("Create New Poll")},id:"My Polls".replace(/\s/g,"")}),s.a.createElement(B,{order:t("Create New Poll"),showing:a("Create New Poll"),close:function(){e.closeWidget("Create New Poll")},authenticated:this.state.authenticated,username:this.state.username,updateParentState:this.updateParentState,id:"Create New Poll".replace(/\s/g,"")}),s.a.createElement(M,{order:t("Show Poll"),showing:a("Show Poll"),close:function(){e.closeWidget("Show Poll")},pollId:this.state.showingPollId,authenticated:this.state.authenticated,username:this.state.username,updateParentState:this.updateParentState,id:"Show Poll".replace(/\s/g,"")}),s.a.createElement(H,{order:t("Register"),showing:a("Register"),close:function(){e.closeWidget("Register")},authenticated:this.state.authenticated,id:"Register".replace(/\s/g,"")}),s.a.createElement(L,{order:t("Login"),showing:a("Login"),close:function(){e.closeWidget("Login")},closeRegister:function(){e.closeWidget("Register")},authenticated:this.state.authenticated,attemptedLogin:this.state.attemptedLogin,updateParentState:this.updateParentState,id:"Login".replace(/\s/g,"")}),s.a.createElement("p",{className:"noWidgetMsg",onClick:function(){e.showWidget(W)}},0===this.state.visibleWidgets.length?"Click here or \u2630 for the menu":"")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t){e.exports=function(e,t){return{order:e,display:t?"block":"none",animation:"appear 1s ease-out ".concat(100*e,"ms forwards")}}}},[[24,1,2]]]);
//# sourceMappingURL=main.ee01e592.chunk.js.map